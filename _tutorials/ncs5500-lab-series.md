---
published: true
date: '2019-09-07 13:19 +0200'
title: 'Testing the NCS5500: The Lab Series'
author: Nicolas Fevrier
excerpt: >-
  Test cases and demos of the NCS5500 products to speed up your own validation
  process
position: hidden
tags:
  - ncs5500
  - lab
  - test
  - test cases
  - validation
  - ios xr
---
{% include toc icon="table" title="Testing the NCS5500: The Lab Series" %}

![LabSeries-banner-thin.png]({{site.baseurl}}/images/LabSeries-banner-thin.png){: .align-center}

You can find more content related to NCS5500 including routing memory management, VRF, URPF, Netflow, QoS, EVPN, Flowspec implementation following this [link](https://xrdocs.io/ncs5500/tutorials/).

## Introduction

We are trying something new today, and we hope it will really help speeding up the validation process for our customers and partners.

In this videos and blog posts, we will present tests performed in our labs in different situations. The purpose is to:
- present tests requiring extremely large or complex setup so customer don't need to have them executed during Proof of Concept (CPOC)
- provide recommendation on the test methodology
- provide explanations on the results and the behavior experienced

We open the books.

## Lab Tests

Here are the tests already performed and documented, and the ones we will present in the near(ish) future:

### BGP Flowspec

**Auto-Mitigation of a Memcached Attack**  
Video: Demonstration of the interoperability of the NetScout (Arbor) DDoS mitigation system and the NCS5500 (using Jericho+ and eTCAM, -SE system):
- detection of the attack via Netflow / IPFIX
- injection of a BGP flowspec rule and mitigation of the attack  
[https://www.youtube.com/watch?v=iRPob7Ws2v8](https://www.youtube.com/watch?v=iRPob7Ws2v8)

**Flowspec scale and resources**  
Test of various aspects around NCS5500 Flowspec implementation:  
- scale validation: injection of 3000 simple rules
- out of resource (oor) validation: check the behavior when injecting, 4000, 6000 and 9000 rules
- programming rate: validation of the speed to write the rules in the eTCAM
- max-prefix: validation of the behavior exceeding the number of advertisement authorized per session
- memory consumption: verification of the memory space used by different rules. Test with the auto-mitigation generated by the NetScout/Arbor flowspec controller  
[https://xrdocs.io/ncs5500/tutorials/bgp-flowspec-on-ncs5500/](https://xrdocs.io/ncs5500/tutorials/bgp-flowspec-on-ncs5500/)

### Hardware High Availability and Redundancy

**Fabric Redundancy** (coming soon)  
Test performed with a snake topology on a single line card. The purpose is to identify the impact on performance and bandwidth, per NPU, when removing a fabric cards.

**Route Processor, System Controller and Power Modules Redundancy** (coming soon)
Demonstration of the impact (and lack of impact for instance) when ejecting the Active or Standby RP and the System Controller of an NCS5508. Then the test is focusing on the power supply modules.

### Netflow and IPFIX

**Pushing Netflow to 11**  
Validation of the netflow implementation on the Jericho+ (with eTCAM) line card: the 36x100G-SE:  
- impact of the packet size
- impact of the port load / bandwidth
- impact of sampling interval
- impact of the number of flows
- impact of the active / inactive timers
- scale test on a full loaded chassis
- stress test with process crash, config/rollback, ...  
[https://xrdocs.io/ncs5500/tutorials/netflow-ncs5500-test-results/](https://xrdocs.io/ncs5500/tutorials/netflow-ncs5500-test-results/)

### FIB

**FIB Programming Rate**
In this blog posts we demonstrated how fast the routing information is programmed in hardware.  
First the BGP table learnt at the Route Processor level.  
Second, the FIB table programmed in the External TCAM of a Jericho+ based system.  
[https://xrdocs.io/ncs5500/tutorials/ncs5500-fib-programming-speed/](https://xrdocs.io/ncs5500/tutorials/ncs5500-fib-programming-speed/)

**FIB Writing Rate on Jericho+ w/ eTCAM**  
The video recording of the demo described in the blog post above:  
[https://www.youtube.com/watch?v=3tIVveCOZHs](https://www.youtube.com/watch?v=3tIVveCOZHs)

**FIB Writing Rate on Jericho+ w/o eTCAM but Large LEM / NCS55A1-24H**  
Follow up of the previous test but in the LPM / LEM of an NCS55A1-24H:  
[https://www.youtube.com/watch?v=nT31rHqFm-o](https://www.youtube.com/watch?v=nT31rHqFm-o)

**FIB Scale on Jericho+ w/ eTCAM** (coming soon)  
Validation of the capability to store a full routing table first then to push the cursor to 4M IPv4 entries in the hardware (for instance the eTCAM of a Jericho+ system).

### Buffers

**Buffer and burst test**  
Two parts in this demo:
- Data collected in hundreds of production routers to identify the amount of traffic handled in On-Chip Buffer compared to traffic evicted to DRAM. Also the number of packets dropped because of DRAM bandwidth exhaustion (spoiler alert: zero)
- Burst test in a large lab setup with 27x 100G tester interfaces. We run 80% of background traffic and we generate 20% and more of bursty traffic.  
[https://xrdocs.io/ncs5500/tutorials/ncs5500-qos-part-2-verifying-buffering/](https://xrdocs.io/ncs5500/tutorials/ncs5500-qos-part-2-verifying-buffering/)  
First part in the video: [https://www.youtube.com/watch?v=1qXD70_cLK8](https://www.youtube.com/watch?v=1qXD70_cLK8)  
Second part with Sai's lab demo: [https://youtu.be/1qXD70_cLK8?t=291](https://youtu.be/1qXD70_cLK8?t=291)

### Performance / Snake

**IPv4 and IPv6 VRF Snake** (coming soon)  
Pratyusha Aluri set up a very large testbed with two NCS5508 back to back, interconnected through 288x 100GE interfaces. Tests performed on 36x100G-SE line cards (Jericho+ with eTCAM)  
- snake IPv4 with 129B, 130B and IMIX traffic distribution
- snake IPv6 with same packet sizes
- performed with and without configuration on interfaces (ACL ingress+egress and QoS: classification and remarking)

**ECMP and Link Aggregation** (coming soon)  
Same testbed then above, reconfigured to validate ECMP and LAG load balancing with multiple bundles of 64x 100GE interfaces each.

**Non-Drop Rate** (coming soon)  
Test performed on Jericho+ systems. Identification and explanation of the different packet size performances.

## Conclusion: What's next?

We plan to add more and more test demos to this page, so the first call to action is to come back regularly to stay informed.  
Also, you can use the comments section in the video or this blog post to tell us what would be of interest for you specifically.
Let's be clear ;)  We don't guarantee we will do it, but as much as possible we will take your feedback into consideration for the next ones.
